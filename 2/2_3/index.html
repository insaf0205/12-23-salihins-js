<!DOCTYPE html>
<html>
<head>
<title>Home Page with Annoying Modal</title>
<!-- <style>
body { font-family: sans-serif; margin: 0; }
.faq { height: 500px; background-color: lightblue; margin-bottom: 20px; }
#modal { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.8); z-index: 1000; }
#modal-content { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); background-color: white; padding: 20px; text-align: center; }
#modal-content button { margin-top: 10px; }
</style> -->
<link rel="stylesheet" href="./assets/css/style.css">
</head>
<body>

<div class="main-container" style="height: 1000px; background-color: lightgray;">

    <div class="header">

        <div class="header-main">

            <p>Основная страница</p>

        </div>

        <div class="header-nav">

            <a href="#">Главная</a>
            <a href="#">Найти</a>
            <a href="#">Настройки</a>

        </div>

    </div>

    <div class="main-text">

        <h1>Главная страница сайта</h1>

    </div>

</div>

<div class="faq">
  <h2>Часто задаваемые вопросы</h2>
  <p>Здесь будет информация о часто задаваемых вопросах. Прокрутите вниз, чтобы увидеть надоедливое модальное окно!</p>
</div>

<div id="modal">
  <div id="modal-content">
    <h3>Надоедливое модальное окно!</h3>
    <p>Это модальное окно будет появляться каждый раз, когда вы прокрутите вниз к разделу "Часто задаваемые вопросы".</p>
    <button id="close-modal">Закрыть (на один раз)</button>
    <button id="close-modal-forever">Закрыть навсегда</button>
  </div>
</div>

<script>
const faq = document.querySelector('.faq');
const modal = document.getElementById('modal');
const closeModalButton = document.getElementById('close-modal');
const closeModalForeverButton = document.getElementById('close-modal-forever');

let modalClosedOnce = localStorage.getItem('modalClosedOnce') === 'true';
let modalClosedForever = localStorage.getItem('modalClosedForever') === 'true';


const observer = new IntersectionObserver(entries => {
  entries.forEach(entry => {
    if (entry.intersectionRatio >= 0.3 && !modalClosedForever) {
        if (!modalClosedOnce) {
            showModal();
        }
    }
  });
}, { threshold: 0.3 });

observer.observe(faq);

function showModal() {
  modal.style.display = 'block';
}

closeModalButton.addEventListener('click', () => {
    modal.style.display = 'none';
    modalClosedOnce = true;
    localStorage.setItem('modalClosedOnce', 'true');
});

closeModalForeverButton.addEventListener('click', () => {
    modal.style.display = 'none';
    modalClosedForever = true;
    localStorage.setItem('modalClosedForever', 'true');
});
</script>

</body>
</html>
